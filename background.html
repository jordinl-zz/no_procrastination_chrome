<html>
  <head>
    <script>
      is_paused = function(){
        return localStorage['no_procrast_is_paused'] == 'true';
      }

      chrome.extension.onRequest.addListener(
        function(request, sender, sendResponse) {
          if (request.data == "domain_list"){
            sendResponse({data: localStorage['no_procrast_list']});
          }
          if (request.data == "is_paused"){
            sendResponse({is_paused: is_paused()});
          }
       });

      chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab){
        chrome.tabs.executeScript(tabId, {
          file: "hide_domains.js" 
        });
      });
    </script>
  </head>
</html>
